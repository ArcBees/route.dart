<!DOCTYPE html>

<html>
  <head>
    <link rel="import" href="company-info.html">
  </head>
  <body>
    <element name="x-porfolio" constructor="PortfolioComponent" extends="div">
      <template>
        <ul class="nav nav-tabs">
          <template iterate='tab in tabs'>
            <li class='{{activeClass(tab)}}'>
              <a href on-click="navigateToTab(tab, $event)">{{tab['name']}}</a>
            </li>
          </template>
        </ul>
        <template if="activeTab == null">
          Loading...
        </template>
        <template if="activeTab == tabs[0]">
          <h1>Portfolio</h1>
          <template if="companies == null">
            Loading...
          </template>
          <template if="companies != null">
            <table class="table">
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Revenue</th>
            </tr>
            <tbody template iterate='company in companies'>
            <tr>
              <td>{{company['id']}}</td>
              <td><a href on-click="openCompany(company, $event)">{{company['name']}}</a></td>
              <td>{{company['revenue']}}</td>
            </tr>
            </tbody>
            </table>
          </template>
        </template>
        <template iterate="tab in tabs.sublist(1)">
          <template if="activeTab == tab">
            <template if="tab['userValue'] == null">
              Loading...
            </template>
            <template if="tab['userValue'] != null">
              <x-company-info company="{{tab['userValue']}}" route="{{companyRoute}}"></x-company-info>
            </template>
          </template>
        </template>
      </template>
      <script type="application/dart" src="portfolio.dart"></script>
    </element>
  </body>
</html>
